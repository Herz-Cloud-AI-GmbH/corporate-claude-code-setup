{
    "name": "claude-code-setup",
    // use dockerfile for build
    "build": {
      "dockerfile": "Dockerfile",
      "context": "..",
      // build-time environment vars
      "args": {
        "APP_FOLDER": "/workspaces/${localWorkspaceFolderBasename}",
        "CLAUDE_CODE_VERSION": "latest"
      }
    },
    "remoteUser": "node",
    // Enable host.docker.internal for accessing host services (e.g., Ollama)
    "runArgs": [
      "--add-host=host.docker.internal:host-gateway"
    ],
    // Add mounts
    "mounts": [
      "source=${localEnv:HOME}${localEnv:USERPROFILE}/.ssh,target=/home/node/.ssh,type=bind,readonly"
    ],
    // Forward ports
    "forwardPorts": [
      3000,
      4000
    ],
    // Port attributes to ensure proper forwarding
    "portsAttributes": {
      "3000": {
        "label": "Next.js App",
        "onAutoForward": "notify"
      },
      "4000": {
        "label": "LiteLLM Proxy",
        "onAutoForward": "silent"
      }
    },
    // Post-create setup instructions
    "postCreateCommand": {
      "addSafeRepository": "git config --global --add safe.directory /workspaces/${localWorkspaceFolderBasename}",
      "showInstructions": "echo '\nðŸš€ Welcome to Claude Code Multi-Provider Setup!\n\nTo configure Claude Code, run one of:\n  make setup-gcp      # Use GCP Vertex AI\n  make setup-ollama   # Use local Ollama\n  make setup-copilot  # Use GitHub Copilot\n\nFor help: make help\n'"
    },
    // customize the devcontainer
    "customizations": {
      "vscode": {
        // add all required extensions
        "extensions": [
          // claude
          "Anthropic.claude-code",
          // makefile tools
          "ms-vscode.makefile-tools",
          // node extensions
          "dbaeumer.vscode-eslint",
          "esbenp.prettier-vscode",
          "christian-kohler.path-intellisense",
          // yaml
          "redhat.vscode-yaml",
          // git
          "mhutchie.git-graph",
          // spell checker
          "streetsidesoftware.code-spell-checker",
          // docker
          "ms-azuretools.vscode-docker",
          "ms-azuretools.docker"
        ],
        "settings": {
          "workbench.colorCustomizations": {
            // title bar coloring
            "titleBar.activeBackground": "#e16277",
            "titleBar.activeForeground": "#000000",
            "titleBar.inactiveBackground": "#e16277",
            "titleBar.inactiveForeground": "#2c2c2c",
            // left side bar coloring
            "activityBar.activeBackground": "#af6d78",
            "activityBar.background": "#e16277",
            "activityBar.foreground": "#000000",
            "activityBar.inactiveForeground": "#2c2c2c",
            "activityBarBadge.background": "#eecb9d",
            "activityBarBadge.foreground": "#15202b",
            "commandCenter.border": "#15202b99",
            "sash.hoverBorder": "#ecfbf5",
            // footer coloring
            "statusBar.background": "#e16277",
            "statusBar.foreground": "#000000",
            "statusBarItem.hoverBackground": "#e16277",
            "statusBarItem.remoteBackground": "#e16277",
            "statusBarItem.remoteForeground": "#000000"
          },
          // Editor Settings (consolidated)
          "editor.defaultFormatter": "esbenp.prettier-vscode",
          "editor.formatOnSave": true,
          "editor.quickSuggestions": {
            "strings": true
          },
          // Prettier settings
          "prettier.requireConfig": true,
          "prettier.configPath": ".prettierrc",
          // Formatter settings
          "[typescript][typescriptreact][javascript][javascriptreact][json][css]": {
            "editor.defaultFormatter": "esbenp.prettier-vscode"
          },
          // stop auto-forwarding ports
          "remote.autoForwardPorts": false,
          // file settings
          "files.trimTrailingWhitespace": true,
          "files.insertFinalNewline": true
        }
      }
    }
  }
